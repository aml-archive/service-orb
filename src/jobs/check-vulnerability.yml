description: >
  Initiates a code vulnerability check using Snyk

executor: default

parameters:
  project:
    type: string
    default: ${CIRCLE_PROJECT_REPONAME}
    description: >
      Circle project repo name
  ssh-fingerprint:
    type: string
    default: "4c:1d:2e:e7:7a:44:2a:1f:6a:fc:9e:45:6b:22:38:d1"
    description: >
      Used to access dependencies in private GitHub repos

steps:
  - checkout
  - add_ssh_keys:
      fingerprints:
        - << parameters.ssh-fingerprint >>
  - snyk/scan:
      monitor-on-build: true
      project: << parameters.project >>
